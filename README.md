# Municipio Schema Repository

This repository is responsible for exposing custom schema definitions and extensions for use in the Municipio ecosystem. All schema definitions are provided in [JSON-LD](https://json-ld.org/) format and are designed to extend or complement [schema.org](https://schema.org/) and related vocabularies.

## Repository Structure

- `schema.jsonld` — The main schema file, containing all definitions and extensions in a single JSON-LD document. This file is generated automatically.
- `schema/definitions/classes/` — Contains individual JSON-LD files for each custom class.
- `schema/definitions/properties/` — Contains individual JSON-LD files for each custom property.
- `scripts/merge-schema.js` — A Node.js script that merges all class and property definitions into `schema.jsonld`.
- `scripts/generate-docs.js` — A Node.js script that generates HTML documentation from `schema.jsonld`.
- `docs/index.html` — The generated HTML documentation.

## How to Work in This Architecture

1. **Add or Edit Definitions**
   - To add a new class, create a new `.jsonld` file in `schema/definitions/classes/`.
   - To add a new property, create a new `.jsonld` file in `schema/definitions/properties/`.
   - To edit an existing definition, update the corresponding file in the appropriate directory.

2. **Do Not Edit `schema.jsonld` Directly**
   - All changes should be made in the `schema/definitions/classes/` and `schema/definitions/properties/` directories.
   - The `schema.jsonld` file is generated by the merge script and should not be edited by hand.

3. **Keep Each Definition Self-Contained**
   - Each `.jsonld` file should contain a single class or property definition.
   - Use valid JSON-LD structure and ensure all references are correct.

## How to Merge Definitions

After making changes or adding new definitions, you need to regenerate the main `schema.jsonld` file.

### Prerequisites
- [Node.js](https://nodejs.org/) installed on your system.

### Steps
1. Open a terminal in the repository root.
2. Run the following command:
   ```sh
   node scripts/merge-schema.js
   ```
3. The script will read all files in `schema/definitions/classes/` and `schema/definitions/properties/`, merge them, and update `schema.jsonld`.

## How to Generate HTML Documentation

After merging your schema definitions, you can generate human-readable documentation:

### Steps
1. Make sure `schema.jsonld` is up to date (see above).
2. Run the following command:
   ```sh
   node scripts/generate-docs.js
   ```
3. The documentation will be generated at `docs/index.html`.

Open this file in your browser to view the documentation.

## Purpose

This architecture makes it easy to:
- Maintain a large and growing set of schema extensions.
- Avoid merge conflicts and improve code review by keeping each definition in its own file.
- Ensure the main schema file and documentation are always up-to-date and consistent.

---

For questions or contributions, please open an issue or submit a pull request.
